<h2 align=center>AntColonyOptimizationèšç¾¤ç®—æ³•</h2>
<div align="center">
<image src="https://markdown-liyang.oss-cn-beijing.aliyuncs.com/label/Github-LiYangSir-brightgreen.svg">
<image src="https://markdown-liyang.oss-cn-beijing.aliyuncs.com/label/quguai.cn-green.svg">
<image src="https://img.shields.io/badge/Lannguage-MatLab-yellow">
<image src="https://markdown-liyang.oss-cn-beijing.aliyuncs.com/label/Version-1.0-blue.svg">
</div>

------

> å‰è¨€ï¼šæœ¬æ–‡ä¸»è¦å›´ç»•è§£å†³TSPæ—…è¡Œå•†é—®é¢˜å±•å¼€ï¼Œå¯¹äºæœºå™¨äººçš„è·¯çº¿è§„åˆ’ä»¥åŠéçº¿æ€§æ–¹ç¨‹æ±‚è§£çš„é—®é¢˜ç­‰è§£å†³æ–¹æ¡ˆå¤§å®¶å¯ä»¥ç›´æ¥å‚è€ƒ[githubæºç åœ°å€](https://github.com/LiYangSir/SmartAlgorithm)ï¼Œ
> å¯¹äºä¸€äº›å…¶ä»–ä¼˜åŒ–ç®—æ³•ä¾‹å¦‚é—ä¼ ç®—æ³•è§£å†³ä¸€äº›ç°å®é—®é¢˜éƒ½æœ‰å®ç°ï¼ï¼ **æ¬¢è¿å°ä¼™ä¼´çš„starå“¦~~ ğŸ¤­**

å…ˆçœ‹ä¸€ä¸‹æ•ˆæœå›¾ï¼š

**èšç¾¤ç®—æ³•è§£å†³TSPé—®é¢˜ï¼š**
<div align=center>
<img src=https://markdown-liyang.oss-cn-beijing.aliyuncs.com/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/ACO%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/res.png  width=50% alt=TSPé—®é¢˜>
</div>

**èšç¾¤ç®—æ³•è§£å†³æœºå™¨äººè·¯å¾„è§„åˆ’é—®é¢˜ï¼š**
<div align=center>
<img src=https://markdown-liyang.oss-cn-beijing.aliyuncs.com/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/ACO%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/route.png  width=50% alt=è·¯å¾„è§„åˆ’>
</div>

## 1ã€ä»€ä¹ˆæ˜¯èšç¾¤ç®—æ³•

### 1.1ã€èšç¾¤ç®—æ³•çš„æ¥æº
&emsp;&emsp;åŒé—ä¼ ç®—æ³•ç›¸ä¼¼ï¼Œéƒ½æ¥è‡ªäºå¤§è‡ªç„¶çš„å¯è¿ªã€‚èšç¾¤ç®—æ³•å°±æ¥è‡ªäºèš‚èšå¯»æ‰¾é£Ÿç‰©è¿‡ç¨‹ä¸­å‘ç°è·¯å¾„çš„è¡Œä¸ºã€‚
&emsp;&emsp;èš‚èšå¹¶æ²¡æœ‰è§†è§‰å´å¯ä»¥å¯»æ‰¾åˆ°é£Ÿç‰©ï¼Œè¿™å¾—ç›Šäºèš‚èšåˆ†æ³Œçš„ä¿¡æ¯ç´ ï¼Œèš‚èšä¹‹é—´**ç›¸äº’ç‹¬ç«‹**ï¼Œå½¼æ­¤ä¹‹é—´é€šè¿‡**ä¿¡æ¯ç´ **è¿›è¡Œäº¤æµï¼Œä»è€Œå®ç°ç¾¤ä½“è¡Œä¸ºã€‚

### 1.2ã€èšç¾¤ç®—æ³•çš„åŸºæœ¬åŸç†

&emsp;&emsp;åŸºæœ¬åŸç†çš„è¿‡ç¨‹å°±æ˜¯èš‚èšè§…é£Ÿçš„è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œèš‚èšåœ¨è§…é£Ÿçš„è¿‡ç¨‹ä¸­ä¼šåœ¨è·¯å¾„ä¸Šç•™ä¸‹ä¿¡æ¯ç´ çš„ç‰©è´¨ï¼Œå¹¶åœ¨å¯»æ‰¾é£Ÿç‰©çš„è¿‡ç¨‹ä¸­æ„ŸçŸ¥è¿™ç§ç‰©è´¨çš„å¼ºåº¦ï¼Œå¹¶æŒ‡å¯¼è‡ªå·±çš„è¡Œä¸ºæ–¹å‘ï¼Œä»–ä»¬æ€»ä¼šæœç€æµ“åº¦é«˜çš„æ–¹å‘å‰è¿›ã€‚å› æ­¤å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œèš‚èšè§…é£Ÿçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª**æ­£åé¦ˆ**çš„è¿‡ç¨‹ï¼Œè¯¥è·¯æ®µç»è¿‡çš„èš‚èšè¶Šå¤šï¼Œä¿¡æ¯ç´ ç•™ä¸‹çš„å°±è¶Šå¤šï¼Œæµ“åº¦è¶Šé«˜ï¼Œæ›´å¤šçš„èš‚èšéƒ½ä¼šé€‰æ‹©è¿™ä¸ªè·¯æ®µã€‚

## 2ã€èšç¾¤ç®—æ³•çš„å®ç°åŸç†

### 2.1ã€èšç¾¤ç®—æ³•å®ç°çš„é‡è¦è§„åˆ™ï¼ˆ==ç»†å“==ï¼‰
**1. é¿éšœè§„åˆ™**
&emsp;&emsp;å¦‚æœèš‚èšè¦ç§»åŠ¨çš„æ–¹å‘æœ‰éšœç¢ç‰©æŒ¡ä½ï¼Œä»–ä¼šéšæœºçš„é€‰æ‹©å¦å¤–ä¸€ä¸ªæ–¹å‘ï¼Œå¦‚æœæœ‰ä¿¡æ¯ç´ æŒ‡å¼•çš„è¯ï¼Œä¼šæŒ‰ç…§ä¿¡æ¯ç´ çš„æŒ‡å¼•å‰è¿›ã€‚
**2. æ•£æ’­ä¿¡æ¯ç´ è§„åˆ™**
&emsp;&emsp;æ¯åªèš‚èšåœ¨åˆšæ‰¾åˆ°é£Ÿç‰©çš„æ—¶å€™æ•£å‘å‡ºæ¥çš„ä¿¡æ¯ç´ æœ€å¤šï¼Œå¹¶éšç€èµ°é€‰çš„è·ç¦»ï¼Œæ•£æ’­çš„ä¿¡æ¯è¶Šå°‘ã€‚
**3. èŒƒå›´**
&emsp;&emsp;èš‚èšè§‚å¯Ÿçš„èŒƒå›´æœ‰é™ï¼Œåªèƒ½åœ¨å±€éƒ¨çš„èŒƒå›´å†…è¿›è¡Œé€‰æ‹©ã€‚ä¾‹å¦‚èš‚èšè§‚å¯Ÿçš„èŒƒå›´ä¸º3\*3ï¼Œé‚£ä¹ˆå®ƒèƒ½å¤Ÿç§»åŠ¨çš„èŒƒå›´ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ª3\*3åŒºåŸŸå†…ã€‚
**4. ç§»åŠ¨è§„åˆ™**
&emsp;&emsp;å‰é¢ä¹Ÿè¯´è¿‡ï¼Œèš‚èšçš„å‰è¿›æ–¹å‘çš„é€‰æ‹©ä¾èµ–äºä¿¡æ¯ç´ çš„æµ“åº¦ï¼Œå›æœå‘ä¿¡æ¯ç´ é«˜çš„æ–¹å‘ç§»åŠ¨ã€‚å½“å‘¨å›´æ²¡æœ‰ä¿¡æ¯ç´ æˆ–è€…ä¿¡æ¯ç´ ç›¸åŒçš„æ—¶å€™ï¼Œé‚£ä¹ˆèš‚èšå°±ä¼šæŒ‰ç…§åŸæ¥çš„æ–¹å‘ç»§ç»­å‰è¿›ï¼Œå¹¶ä¸”åœ¨å‰è¿›æ–¹å‘ä¸Šå—åˆ°ä¸€ä¸ªéšæœºçš„æ‰°åŠ¨ï¼Œä¸ºäº†é¿å…å†åŸåœ°è½¬åœˆï¼Œä»–ä¼šè®°ä½ä¹‹å‰ç»è¿‡çš„ç‚¹ï¼Œä¸‹ä¸€æ¬¡é‡åˆ°çš„æ—¶å€™å°±ä¼šé¿å¼€è¿™ä¸ªå·²ç»ç»è¿‡çš„ç‚¹ã€‚
**5. è§…é£Ÿè§„åˆ™**
&emsp;&emsp;å¦‚æœèš‚èšåœ¨æ„ŸçŸ¥èŒƒå›´å†…æ‰¾åˆ°é£Ÿç‰©åˆ™ç›´æ¥è¿‡å»ï¼ŒåŠ é€Ÿæ¨¡å‹çš„æ”¶æ•›ï¼Œå¦åˆ™æœç€ä¿¡æ¯ç´ é«˜çš„æ–¹å‘å‰è¿›ï¼Œå¹¶ä¸”æ¯åªèš‚èšéƒ½æœ‰å°æ¦‚ç‡çš„çŠ¯é”™è¯¯ï¼Œä»è€Œä¸æ˜¯ä¿¡æ¯ç´ æœ€å¤šçš„ç‚¹ç§»åŠ¨ï¼Œæ‰“ç ´å±€éƒ¨æœ€ä¼˜è§£çš„æƒ…å†µã€‚
**6. ç¯å¢ƒ**
&emsp;&emsp;æ¯åªèš‚èšä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œä»–ä»¬ä¾èµ–ç¯å¢ƒä¸­çš„ä¿¡æ¯ç´ è¿›è¡Œäº¤æµã€‚æ¯åªèš‚èšéƒ½ä»…ä»…èƒ½æ„ŸçŸ¥åˆ°ç¯å¢ƒå†…çš„ä¿¡æ¯ã€‚å¹¶ä¸”éšæœºä¿¡æ¯ç´ ä¼šéšç€æ—¶é—´é€æ¸å‡å°‘ã€‚å¦‚æœè¿™æ¡è·¯ä¸Šç»è¿‡çš„èš‚èšè¶Šæ¥è¶Šå°‘ï¼Œé‚£ä¹ˆä¿¡æ¯ç´ ä¹Ÿä¼šè¶Šæ¥è¶Šå°‘ã€‚

### 2.2ã€èšç¾¤ç®—æ³•è§£å†³TSPé—®é¢˜çš„è¿‡ç¨‹

&emsp;&emsp;æ—…è¡Œå•†é—®é¢˜ï¼ˆTraveling saleman problem, TSPï¼‰æ˜¯ç‰©æµé…é€çš„å…¸å‹é—®é¢˜ï¼Œä»–çš„æ±‚è§£æœ‰ååˆ†é‡è¦çš„ç†è®ºå’Œç°å®æ„ä¹‰ã€‚

&emsp;&emsp;æ—…è¡Œå•†é—®é¢˜ä¼ ç»Ÿçš„è§£å†³æ–¹æ³•éƒ½æ˜¯é—ä¼ ç®—æ³•ï¼Œä½†æ˜¯é—ä¼ ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦æ…¢ï¼Œå…·æœ‰ä¸€å®šçš„ç¼ºé™·ã€‚

&emsp;&emsp;åœ¨æ±‚è§£TSPèšç¾¤ç®—æ³•ä¸­ï¼Œæ¯åªèš‚èšç›¸äº’ç‹¬ç«‹ï¼Œç”¨äºæ„é€ ä¸åŒçš„è·¯çº¿ï¼Œèš‚èšä¹‹é—´é€šè¿‡ä¿¡æ¯ç´ è¿›è¡Œäº¤æµï¼Œåˆä½œæ±‚è§£ã€‚

**åŸºæœ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š**

1. åˆå§‹åŒ–ï¼Œè®¾ç½®è¿­ä»£æ¬¡æ•°ï¼›
2. å°† ants åªèš‚èšæ”¾ç½®åˆ° cities ä¸ªåŸå¸‚ä¸Šï¼›
3. antsåªèš‚èšæŒ‰ç…§æ¦‚ç‡å‡½æ•°é€‰æ‹©ä¸‹ä¸€ä¸ªåŸå¸‚ï¼Œå¹¶å®Œæˆæ‰€æœ‰åŸå¸‚çš„å‘¨æ¸¸ï¼›
4. è®°å½•æœ¬æ¬¡è¿­ä»£çš„æœ€ä¼˜è·¯çº¿ï¼›
5. å…¨å±€æ›´æ–°ä¿¡æ¯ç´ ã€‚
6. ç»ˆæ­¢ã€‚æœ¬ä¾‹ç»ˆæ­¢æ¡ä»¶æ˜¯è¿­ä»£æ¬¡æ•°ï¼Œä¹Ÿå¯ä»¥è®¾ç½®è¿è¡Œæ—¶é—´æˆ–æœ€çŸ­è·¯å¾„çš„ä¸‹é™ã€‚
7. è¾“å‡ºç»“æœ

&emsp;&emsp;åº”ç”¨å…¨å±€æ›´æ–°ä¿¡æ¯ç´ æ¥æ”¹å˜è·¯å¾„ä¸Šä¿¡æ¯ç´ çš„å€¼ã€‚å½“antsèš‚èšç”Ÿæˆäº†antsä¸ªè§£ï¼Œå…¶ä¸­æœ€çŸ­è·¯å¾„çš„æ˜¯æœ¬ä»£æœ€ä¼˜è§£ï¼Œå°†å±äºè¿™æ¡è·¯çº¿ä¸Šçš„æ‰€æœ‰å…³è”çš„è·¯çº¿è¿›è¡Œä¿¡æ¯ç´ æ›´æ–°ã€‚

&emsp;&emsp;ä¹‹æ‰€ä»¥ä½¿ç”¨å…¨å±€ä¿¡æ¯ç´ ï¼Œæ˜¯ä¸ºäº†è®©æœ€ä¼˜è·¯å¾„ä¸Šæœ‰æ ¼å¤–çš„ä¿¡æ¯ç´ æ”¯æŒï¼Œè¿™æ ·åé¢çš„èš‚èšä¼šä¼˜å…ˆé€‰æ‹©è¿™æ¡è·¯çº¿ã€‚å¹¶ä¸”ä¼´éšç€ä¿¡æ¯ç´ çš„æŒ¥å‘ï¼Œå…¨å±€æœ€çŸ­è·¯å¾„å…³è”è·¯çº¿ä¿¡æ¯ç´ å¾—åˆ°è¿›ä¸€æ­¥å¢å¼ºã€‚

## 3ã€èšç¾¤ç®—æ³•TSPç¨‹åºå®ç°

### 3.1ã€ç¨‹åºä¸­çŸ©é˜µå¤§å°ä»¥åŠå«ä¹‰
**ç¨‹åºä¸­çŸ©é˜µè¯´æ˜**(é¦–å­—æ¯å¤§å†™)ï¼š
|çŸ©é˜µ|å¤§å°|å«ä¹‰|
|:---:|:---:|---|
|Distance|(åŸå¸‚æ•°é‡ï¼ŒåŸå¸‚æ•°é‡)|è¡¨å¾å„ä¸ªåŸå¸‚ä¹‹é—´çš„**è·ç¦»**ä¿¡æ¯|
|Eta|(åŸå¸‚æ•°é‡ï¼ŒåŸå¸‚æ•°é‡)|è¡¨å¾å„ä¸ªåŸå¸‚ä¹‹é—´çš„**å¯å‘å› å­**|
|Tau|(åŸå¸‚æ•°é‡ï¼ŒåŸå¸‚æ•°é‡)|è¡¨å¾å„ä¸ªåŸå¸‚ä¹‹é—´**ä¿¡æ¯ç´ **çš„å€¼|
|Route|(èš‚èšä¸ªæ•°ï¼ŒåŸå¸‚æ•°é‡)|æ¯åªèš‚èšå‘¨æ¸¸åŸå¸‚çš„è®°å½•çŸ©é˜µ|
|R_best|(è¿­ä»£æ¬¡æ•°ï¼ŒåŸå¸‚æ•°é‡)|æ¯æ¬¡è¿­ä»£çš„æœ€ä¼˜è·¯çº¿|
|L_best|(è¿­ä»£æ¬¡æ•°ï¼Œ1)|æ¯æ¬¡è¿­ä»£çš„æœ€çŸ­è·ç¦»|
|L_ave|(è¿­ä»£æ¬¡æ•°ï¼Œ1)|æ¯æ¬¡è¿­ä»£çš„å¹³å‡è·ç¦»|

### 3.2ã€æ•´ä½“æ¶æ„

```matlab
'3.3ã€åˆå§‹åŒ–å˜é‡å‚æ•°'
'3.4ã€åˆå§‹åŒ–çŸ©é˜µå‚æ•°'

while 'è¿­ä»£æ¬¡æ•°'
    '3.5ã€å®‰æ’èš‚èšåˆå§‹ä½ç½®'
    '3.6ã€èš‚èšå‘¨æ¸¸'
    '3.7ã€è®°å½•æœ€ä¼˜è·¯çº¿ä»¥åŠæœ€çŸ­è·ç¦»'
    '3.8ã€æ›´æ–°ä¿¡æ¯ç´ '
end
'3.9ã€ç»“æœè¾“å‡º'
```

### 3.3ã€åˆå§‹åŒ–å˜é‡å‚æ•°
åˆå§‹åŒ–ä¸»è¦å¯¹ç¨‹åºå½“ä¸­é‡è¦å‚æ•°è¿›è¡Œå£°æ˜ã€‚
**ç¨‹åºå®ç°ï¼š**
```matlab
% éšæœºäº§ç”Ÿ40ä¸ªåŸå¸‚çš„åæ ‡
position = 50 * randn(40, 2);
epochs = 50;  % è¿­ä»£æ¬¡æ•°
% èš‚èšä¸ªæ•°æœ€å¥½å¤§äºç­‰äºåŸå¸‚ä¸ªæ•°ï¼Œä¿è¯æ¯ä¸ªåŸå¸‚éƒ½æœ‰ä¸€ä¸ªèš‚èš
ants = 40;  
alpha = 1.4;  % è¡¨å¾ä¿¡æ¯ç´ é‡è¦ç¨‹åº¦å‚æ•°
beta = 2.2;  % è¡¨å¾å¯å‘å› å­é‡è¦ç¨‹åº¦å‚æ•°
rho = 0.15;  % ä¿¡æ¯ç´ æŒ¥å‘å‚æ•°
Q = 10^6;  % ä¿¡æ¯ç´ å¢å¼ºç³»æ•°
cities = size(position, 1);  % åŸå¸‚ä¸ªæ•°
```

### 3.4ã€åˆå§‹åŒ–çŸ©é˜µå‚æ•°
ä¸»è¦å®ç°äº†é‡è¦çŸ©é˜µå£°æ˜ä»¥åŠåˆå§‹åŒ–ã€‚
**ç¨‹åºå®ç°ï¼š**
```matlab
% åŸå¸‚ä¹‹é—´çš„è·ç¦»çŸ©é˜µ
Distance = ones(cities, cities);
for i = 1: cities
    for j = 1: cities
        if i ~= j
            % åæ ‡ç‚¹æ¬§æ°è·ç¦»
            Distance(i, j) = ((position(i, 1) - position(j, 1))^2 + (position(i, 2) - position(j, 2))^2)^0.5;
        else
            % å› ä¸ºåé¢è¦å–å€’æ•°ï¼Œæ‰€ä»¥å–ä¸€ä¸ªæµ®ç‚¹æ•°ç²¾åº¦å¤§å°
            Distance(i, j) = eps;
        end
        Distance(j, i) = Distance(i, j);
    end
end
% å¯å‘å› å­çŸ©é˜µ
Eta = 1./Distance;
% ä¿¡æ¯ç´ åˆå§‹å€¼æ¯ä¸ªè·¯çº¿å‡ç›¸åŒä¸º 1
Tau = ones(cities, cities);
% æ¯åªèš‚èšçš„è·¯çº¿å›¾
Route = zeros(ants, cities);
epoch = 1;
% è®°å½•æ¯å›åˆæœ€ä¼˜åŸå¸‚
R_best = zeros(epochs, cities);
% è®°å½•æ¯å›åˆæœ€çŸ­è·ç¦»
L_best = inf .* ones(epochs, 1);
% è®°å½•æ¯å›åˆå¹³å‡è·ç¦»
L_ave = zeros(epochs, 1);
```

### 3.5ã€å®‰æ’èš‚èšåˆå§‹ä½ç½®
ä¸»è¦æ˜¯å°†æ‰€æœ‰çš„èš‚èšå®‰ç½®åœ¨æ‰€æœ‰çš„åŸå¸‚å½“ä¸­ï¼Œèš‚èšä¸ªæ•° >= åŸå¸‚ä¸ªæ•°ã€‚å¹¶ä¸”ä¿è¯å‡åŒ€åˆ†å¸ƒã€‚
```matlab
% åˆå§‹éšæœºä½ç½®
RandPos = [];
for i = 1: ceil(ants / cities)
    RandPos = [RandPos, randperm(cities)];
end
% åˆå§‹ä½ç½®è½¬ç½®å°±å¯¹åº”äº†RouteçŸ©é˜µä¸­æ¯åªèš‚èšçš„åˆå§‹ä½ç½®
Route(:, 1) = (RandPos(1, 1:ants))';
```
### 3.6ã€èš‚èšå‘¨æ¸¸
ç”±äºèš‚èšçš„åˆå§‹ä½ç½®å·²ç»ç¡®å®šï¼Œæ‰€æœ‰ä¸»è¦å°±æ˜¯å‘¨æ¸¸å‰©ä½™çš„æ‰€æœ‰åŸå¸‚ï¼Œå¾ªç¯ï¼ˆcities-1ï¼‰æ¬¡ã€‚é‡Œé¢çš„å¾ªç¯å°±æ˜¯å°†æ‰€æœ‰çš„èš‚èšè¿›è¡Œå‘¨æ¸¸ä¸€æ¬¡ã€‚

å¯¹äºæ¯åªèš‚èšçš„å‘¨æ¸¸ä¸»è¦æ˜¯å¯¹å‰©ä½™çš„åŸå¸‚è¿›è¡Œå‘¨æ¸¸ï¼Œä¸èƒ½é‡å¤æ‹œè®¿åŒä¸€ä¸ªåŸå¸‚ã€‚NoVisitedçŸ©é˜µå­˜å‚¨ç€è¯¥èš‚èšæœªè®¿é—®çš„åŸå¸‚ã€‚ç„¶ååœ¨æ‰€æœ‰æ²¡æœ‰è®¿é—®è¿‡åŸå¸‚ä¸­é€‰æ‹©ä¸€ä¸ªã€‚é€‰æ‹©çš„æ–¹å¼ä¹Ÿæ˜¯ç±»ä¼¼äºè½®ç›˜èµŒæ³•ã€‚æ¦‚ç‡å‡½æ•°è¡¨å¾ä¿¡æ¯ç´ å’Œå¯å‘å› å­ï¼Œä¸¤è€…æœ‰ç€ä¸åŒçš„é‡è¦ç¨‹åº¦ã€‚
$$
P = [\tau_{ij}(t)]^\alpha Â· [\eta_{ij}]^\beta
$$
å…¶ä¸­$\tau_{ij}(t)$ä¸ºè·¯çº¿ä¸Š$(i, j)$ä¸Šçš„ä¿¡æ¯ç´ æµ“åº¦ï¼›$\eta_{ij}$ä¸ºè·¯çº¿ä¸Š$(i, j)$ä¸Šçš„å¯å‘å¼ä¿¡æ¯ï¼›
**ç¨‹åºå®ç°ï¼š**
```matlab
for j = 2: cities
        for i = 1: ants
            Visited = Route(i, 1:j-1);
            NoVisited = zeros(1, (cities - j + 1));
            P = NoVisited;
            num = 1;
            for k = 1: cities
                if length(find(Visited == k)) == 0
                    NoVisited(num) = k;
                    num = num + 1;
                end
            end
            for k = 1: length(NoVisited)
                P(k) = (Tau(Visited(end), NoVisited(k))^alpha) * (Eta(Visited(end), NoVisited(k))^beta);
            end
            P = P / sum(P);
            Pcum = cumsum(P);
            select = find(Pcum >= rand);
            to_visit = NoVisited(select(1));
            Route(i, j) = to_visit;
        end
    end
```
### 3.7ã€è®°å½•æœ€ä¼˜è·¯çº¿ä»¥åŠæœ€çŸ­è·ç¦»
è®¡ç®—æ¯ä¸ªå›åˆæ¯åªèš‚èšèµ°è¿‡çš„è·ç¦»ã€‚å¹¶è®°å½•è¯¥å›åˆæœ€çŸ­è·¯å¾„ï¼Œæœ€çŸ­è·ç¦»å’Œå¹³å‡è·ç¦»ã€‚
```matlab
Distance_epoch = zeros(ants, 1);
for i = 1: ants
    R = Route(i, :);
    for j = 1: cities - 1
        Distance_epoch(i) = Distance_epoch(i) + Distance(R(j), R(j + 1));
    end
    Distance_epoch(i) = Distance_epoch(i) + Distance(R(1), R(cities));
end
L_best(epoch) = min(Distance_epoch);
pos = find(Distance_epoch == L_best(epoch));
R_best(epoch, :) = Route(pos(1), :);
L_ave(epoch) = mean(Distance_epoch);
epoch = epoch + 1;
```

### 3.8ã€æ›´æ–°ä¿¡æ¯ç´ 
æ›´æ–°ä¿¡æ¯ç´ ä¸»è¦ä¿è¯è·å¾—æœ€ä¼˜è·ç¦»çš„é‚£æ¡è·¯çº¿çš„ä¿¡æ¯ç´ å¾—åˆ°æœ€å¤§çš„å¢å¼ºã€‚
```matlab
Delta_Tau = zeros(cities, cities);
for i = 1: ants
    for j = 1: (cities - 1)
        Delta_Tau(Route(i, j), Route(i, j + 1)) = Delta_Tau(Route(i, j), Route(i, j + 1)) + Q / Distance_epoch(i);
    end
    Delta_Tau(Route(i, 1), Route(i, cities)) = Delta_Tau(Route(i, 1), Route(i, cities)) + Q / Distance_epoch(i);
end
Tau = (1 - rho) .* Tau + Delta_Tau;
Route = zeros(ants, cities);
```
### 3.9ã€ç»“æœè¾“å‡º
è¿­ä»£å®Œæˆå,åœ¨R_bestçŸ©é˜µä¸­å¾—åˆ°æœ€çŸ­è·¯å¾„çš„æœ€å°è·¯çº¿ï¼Œæœ€åè¾“å‡ºæœ€ä¼˜çš„ç»“æœã€‚
**ç»“æœè¾“å‡ºå®ç°ï¼š**
```matlab
Pos = find(L_best == min(L_best));
Short_Route = R_best(Pos(1), :);
Short_Length = L_best(Pos(1), :);
figure
subplot(121);
DrawRoute(position, Short_Route);
subplot(122);
plot(L_best);
hold on
plot(L_ave, 'r');
title('å¹³å‡è·ç¦»å’Œæœ€çŸ­è·ç¦»');
```
**ç”»å›¾å‡½æ•°å®ç°ï¼š**
```matlab
function DrawRoute(C, R)
N = length(R);
scatter(C(:, 1), C(:, 2));
hold on
plot([C(R(1), 1), C(R(N), 1)], [C(R(1), 2), C(R(N), 2)], 'g');
hold on
for ii = 2: N
    plot([C(R(ii - 1), 1), C(R(ii), 1)], [C(R(ii - 1), 2), C(R(ii), 2)], 'g');
    hold on
end
title('æ—…è¡Œå•†è§„åˆ’');
```
## 4ã€ç»“æœ
<div align=center>
<img src=https://markdown-liyang.oss-cn-beijing.aliyuncs.com/%E4%BC%98%E5%8C%96%E7%AE%97%E6%B3%95/ACO%E8%9A%81%E7%BE%A4%E7%AE%97%E6%B3%95/untitled.png  width=80% alt=ç»“æœå±•ç¤º>
</div>

> ä¸ºäº†è¯´æ˜æ–¹ä¾¿å°†ä»£ç ç›´æ¥æ‹†å¼€å±•ç¤ºï¼Œå¦‚æœæƒ³è¦å…¨éƒ¨çš„ä»£ç æ¬¢è¿å¤§å®¶ç›´æ¥åˆ° [Githubæºç ](https://github.com/LiYangSir/SmartAlgorithm/tree/master/Ant_Colony_Optimization/ACO_MatLab)

## æœ€å

æ›´å¤šç²¾å½©å†…å®¹ï¼Œå¤§å®¶å¯ä»¥è½¬åˆ°æˆ‘çš„ä¸»é¡µï¼š[æ›²æ€ªæ›²æ€ªçš„ä¸»é¡µ](http://quguai.cn/)

**æºç åœ°å€**ï¼š[githubåœ°å€](https://github.com/LiYangSir/SmartAlgorithm)
